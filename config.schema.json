{
  "pluginAlias": "Flo-by-Moen",
  "pluginType": "platform",
  "singular": true,
  "footerDisplay": "Flo Module Configuration",
  "schema": {
    "type": "object",
    "properties": {
      "name": {
        "title": "Name",
        "type": "string",
        "required": true,
        "default": "Flo-by-Moen",
        "placeholder": "e.g. Flo By Moen"
      },
      "auth": {
        "title": "Authorization",
        "type": "object",
        "properties": {
          "username": {
            "title": "Flo Username",
            "type": "string",
            "required": true
          },
          "password": {
            "title": "Flo Password",
            "type": "string",
            "required": true
          }
        }
      },
        "debug": {
        "title": " Debug",
        "type": "boolean"
      },
      "disableCache": {
        "title": "Disable Caching of Flo Token",
        "type": "boolean",
        "default": false
      },
      "showTemperatureAndHumidity": {
        "title": "Show Water Sensor Temperature and Humidity in HomeKit",
        "type": "boolean",
        "default": true,
        "description": "Display Water Sensor(s) area temperature and humidity in HomeKit."
      },
        "enableValveControl": {
        "title": "Enable valve control in HomeKit",
        "type": "boolean",
        "default": false,
        "description": "Enable or disable Smart Water Shutoff within HomeKit."
      },
        "showHealthTestSwitch": {
        "title": "Run Health Test from HomeKit",
        "type": "boolean",
        "default": false,
        "description": "Display a Health Test switch button to start a manual Health Test in Flo."
      },
        "deviceRefresh": {
        "title": "Device Refresh Interval",
        "type": "integer",
        "default": 60,
        "description": "Poll interval to obtain device updates in seconds. <b>Please note:</b> A very low value may cause lockout to your account and/or API errors.",
        "minimum": 15,
        "maximum": 3600
      },
        "sleepRevertMinutes": {
        "title": "Sleep Time",
        "type": "integer",
        "default": 120,
        "description": "Sleep Mode is a system mode that quiets all monitoring and alerting, effectively putting the Flo System to sleep. This value represents the lenght of time to place the system in sleep mode.",
        "oneOf": [{
          "title": "2 Hours",
          "enum": [
            120
          ]
        },
        {
          "title": "24 Hours",
          "enum": [
           1440
          ]
        },
        {
          "title": "72 Hours",
          "enum": [
            4320
          ]
        }
        ] 
      },
      "excludedDevices": {
        "type": "array",
        "items": {
          "type": "string",
          "description": "Serial Number"
        }
      }
    }
  },
  "layout": [{
      "type": "fieldset",
      "items": [
        "name",
        "auth.username",
        "auth.password",
        "deviceRefresh",
        "sleepRevertMinutes",
        "showTemperatureAndHumidity",
        "showHealthTestSwitch",
        "enableValveControl"
      ]
    },
    {
      "type": "fieldset",
      "expandable": true,
      "title": "Advanced Options",
      "items": [{
          "key": "debug",
          "description": "To see all messages the Homebridge debug (<code>-D</code>) option must also be enabled. <small>See <a target='_blank' href='https://github.com/homebridge/homebridge-raspbian-image/wiki/How-To-Enable-Debug-or-Insecure-Mode'>https://github.com/homebridge/homebridge-raspbian-image/wiki/How-To-Enable-Debug-or-Insecure-Mode</a></small>"
        },
        {
          "key": "disableCache",
          "description": "Disabled the storage of Flo access token to local Homebridge server. Refresh token at start-up."
        },
        {
          "key": "excludedDevices",
          "title": "Excluded Devices",
          "description": "A list of devices to exclude from HomeKit. Users device serial number which can be found in the Flo app.",
          "add": "Add Another Device",
          "type": "array",
          "items": [
            {
              "type": "fieldset",
              "items": [
                "excludedDevices[]"
              ]
            }
          ]
        }
      ]
    }
  ]
}
